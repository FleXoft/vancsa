2003. év 13. szám

# Jön egy királyfi

## A szerző a tulajdon lelke mélyén lakozó sztahanovista fonónőre talál, és ezzel összefüggésben a FreeBSD operációs rendszerrel létesít gyöngéd kapcsolatot. Alábbiakban a romantikus szappanopera első része következik

A jelen történet azzal kezdődött, hogy akartam venni tíz darab újraírható cédélemezt, de nem volt, csak öt. Van a környékemen vagy fél tucat számítástechnikai kereskedés, mindegyik árul újraírható cédéket, ám amikor venni akarok, akkor épp egy szál sincs. A legeslegjobb esetben kapok öt darabot, és hogy mikor jön utánpótlás, azt nem tudja senki. Debiant akartam volna telepíteni a noteszgépre, már le is töltöttem a cd-image állományokat, de azok heten vannak, mint a gonoszok. Persze egészen biztos, hogy a telepítéshez nem kell mind a hét cédé, sőt mint azóta rájöttem, végső esetben egy is elég, de ha ezt kezdettől fogva tudtam volna, akkor az egész történet másképp alakul. A gondviselés, mint később látni fogjuk, most azt akarta, hogy különféle ezoterikus oprendszerekbe fussak bele. Korábban ezen a noteszen SuSE Linux volt egymagában, olyan megfontolás alapján, hogy értelmetlen dolog egy gépre több oprendszert telepíteni, egyszerre úgyis csak az egyik futhat. Amellett az embernek több gépe van, egyikre ezt rak, a másikra amazt, idővel csak-csak belehülyül. Később viszont beláttam, hogy a húszgigás merevlemezt a Linuxnak egyben átadni nem igazán racionális ötlet, mert hiszen sohase lakja be, vagyis az az ésszerű, ha mégis teszek mellé valamit. Viszont ehhez kissé át kell szabnom a merevlemezt, más szóval, a mostani SuSE Linux-ültetvényt beszántom, jön helyette más ­ mondjuk a Debian ­ egy kisebb területen, két gigán például, ha emellé felteszem az XP-t, még akkor is egy csomó helyem marad, amire további operációs rendszereket pakolhatok. Sőt a jelen helyzetben, kellő darabszámú újraírható cédélemezzel nem bírhatván, eleve a további operációs rendszerekkel kezdem, nyilván egy olyannal, amihez öt vagy kevesebb cédére lesz szükség. FreeBSD-t fogok telepíteni.

### Egy igazi arisztokrata

Nyájas olvasóm bizonyára hallott már a FreeBSD-ről, mindenki hallott róla, bár a legtöbben csak igen keveset. Én például korábban annyit tudtam, hogy a Yahoo teljes egészében FreeBSD alatt működik. Továbbá azt is tudtam, hogy a Hotmail is FreeBSD alatt működött, mindaddig, amíg a Microsoft nevű új tulajdonos át nem állíttatta az egészet Windows 2000-re, ami marketingszempontból nyilván roppant értelmes döntés volt, tisztán informatikai értelemben már nem annyira. Végrehajtása közben tudvalévőleg akadtak nehézségek, ezt az ügyfelek is megtapasztalhatták, a cég rendszergazdái pedig, ahogy mondani szokás, szívtak nagyon. Ez utóbbit internetszerte terjedő pletykákból lehetett tudni, s ezen pletykák révén értesülhettünk arról, hogy FreeBSD nevű operációs rendszer is létezik. És persze, itt van a szaksajtó, hogy mást ne mondjak, a "FreeBSD" szó a Számítástechnikában tavaly négy alkalommal is felbukkant. Azaz megemlítődött valamilyen összefüggésben, a szó jelentését és a mögötte álló realitást ismertnek tételezve. Holott egyébként a BSD családba tartozó operációs rendszerekről az informatika iránt érdeklődő publikumnak se igen vannak fogalmai, s ez nemcsak nálunk van így, hanem mindenütt. Miközben a világ leglátogatottabb webállomásainak a lelke valamilyen BSD, és állítólag a világ internetszolgáltatóinak hetven százaléka BSD-t futtat. Továbbá az újraindítás nélkül, egyhuzamban leghosszabb ideje üzemben álló kiszolgálók listáján (http://uptime.netcraft.com/ up/today/top.avg.html) az első ötven helyen két kivétellel csak BSD található. Zárjuk rövidre: a FreeBSD igen teherbíró és kiemelkedően stabil szerveroldali operációs rendszer, amit ugyanakkor bárki letölthet (lásd ezzel kapcsolatban a http://www.freebsdmirrors.org/FBSDsites.php3 című oldalt), és például gránitkemény tűzfalat építhet belőle az otthoni hálózat és a gonosz, veszélyes külvilág közé. Persze, ha úgy tetszik, a FreeBSD általános célú asztali operációs rendszerként is beválhat, ugyanaz az XFree86 fut rajta, mint a Linuxokon, noch dazu a Linux-alkalmazásokat is futtatja, erőforrásigénye kicsi, és mint azt nemsokára látni fogjuk, akár egy divatjamúlt noteszgépre is vígan felmegy. Sőt kifejezetten jól érzi magát a divatjamúlt noteszgépen, de hogy a felhasználó is jól érzi-e magát vele, az más lapra tartozik. A FreeBSD ­ ezt jó, ha tudjuk ­ a Windowsra nemigen hasonlít. (Bár e pillanatban a FreeBSD alatt futó szövegszerkesztő ablaka ­ meg egyáltalán az egész képernyő ­ hajszálra olyan, mintha Windows alatt dolgoznék, de hát ennek a körülménynek a FreeBSD-hez semmi köze nincs. Amit látok, az a grafikus környezet, közelebbről a KDE. Maga a FreeBSD láthatatlan.) Továbbmegyek, a FreeBSD a korszerű Linux disztribúciókra se igazán hasonlít. Valójában éppoly messze van a Linuxtól, mint a Linux a Windowstól, sőt meszszebb, és ez a távolság nőttön nő. A Linux-disztribúciók egyre lomhábbak, egyre hájasabbak, egyre windowsosabbak, a FreeBSD viszont e tekintetben nem változik, ugyanolyan karcsú, izmos és fürge, mint kamaszkorában. Ami pedig nem tegnap volt, hiszen a FreeBSD, illetve a BSD általában, a létező legkékvérűbb operációs rendszer, Árpád apánkkal érkezett ebbe a hazába, rajta volt a Mayfloweren, látta Lenint, vagy ahogy tetszik; mellesleg kevéssé ismert voltát is ebből eredeztethetjük. Kent grófja például nem szokott valóságsókban szerepelni, s ennek megfelelően ritkán emlegetik a bulvárlapok első oldalán. Márpedig a FreeBSD nem csupán főnemes, hanem a királyi család tagja, amennyiben a BDS família maga a királyi család. Hozzájuk képest a Linux egy kivakaródzott házmesterlány, egy parvenü. Hogy mást ne mondjak, BSD előbb volt, mint az internet, sőt az internet létezését is a BSD alapozta meg. Az lesz a legjobb, ha az egész históriát áttekintjük.

### Genealógiai vázlatok

Az első BSD egy Bill Joy nevű úriemberhez kötődik, a helyszín a Berkeley-ben működő University of California, ahol a UNIX operációs rendszer töltötte a gyermekkorát. A cseperedő rendszermag babysitterei (a fönt említett Bill Joy és társa, Chuck Haley) mellékesen megalkották a Pascal programnyelvet és az ex nevű sorszerkesztőt, ezeket Bill Joy valamikor '77 elején egybecsomagolta, így jött létre a Berkeley Software Distribution, röviden BSD. Mintegy harminc példány talál gazdára belőle. Közben a tanszékre ADM­3a terminálok érkeztek, ami lehetővé tette, hogy Bill Joy tető alá hozza az első teljes képernyős kódszerkesztőt, minden szövegszerkesztők ősatyját, a vi editort. Ezzel párhuzamosan írt egy képernyőkezelő segédprogramot, ez volt a termcap, s ily módon '78-ban össze is állt a második Berkeley Software Distribution, röviden 2BSD gerince, vagyis a továbbfejlesztett Pascal, a vi, és néhány ismertebb termináltípushoz a termcap. Később ezekhez számos apróbb utility csatlakozott, s idővel az egész csomag felkerült a tanszék új gépére, egy VAX 11/780-ra. 1979 decemberére ebből lett a 3BSD, az első VAX disztribúció, '80-ban pedig megjelent a 4.0BSD. A BSD hovatovább önálló életet kezdett élni, valójában ez volt a UNIX húsa és bőre, a BSD és a UNIX viszonya a GNU és a Linux mai viszonyára emlékeztetett. A GNU környezetből csak a rendszermag hiányzik (már egyre kevésbé) ahhoz, hogy komplett operációs rendszerről beszélhessünk, a BSD-ből hat darab állomány hiányzott mindössze. És ezenközben Linus Torvalds még kisiskolás volt, ezt se felejtsük el. Idővel aztán létrejött ez a hat állomány is, közben pedig létrejöttek olyan képződmények, mint például a SunOS, ami lényegében a 4.3BSD egyszerű klónjaként kezdte pályafutását. Visszatérve a BSD és az internet történeti kapcsolatára, ez 1979 őszén vette kezdetét a 3BSD-vel, ami kifejezetten a Defense Advanced Research Projects Agency (DARPA) igényeinek megfelelően állt össze, és folytatódott azzal, hogy Rob Gurwitz megjelent Berkeleyben, hóna alatt a TCP/IP protokoll első implementációjával. 1981-et írtunk, akkor tűnt fel a színen az MS-DOS 1.0, de még senki se tudta, mire lesz jó, ha jó lesz valamire egyáltalán. A BSD égisze alatt ugyanakkor olyan eszközök léteztek, amelyek megvannak ma is, rcp, rsh, rlogin, benne vannak az összes létező UNIX jellegű operációs rendszerben, a Cygwint is ideértve. A DOS viszont ma már mindenestül történelem, akárcsak a második pun háború, és nem is mindenki tudja, melyik volt előbb. De nemcsak UNIX jellegű oprendszerek tartalmaznak több-kevesebb BSD-kódot, hanem minden egyéb, a Windows 9.x éppúgy, mint az NT/2000/XP, az OS/2, a BeOS és így tovább, nem is beszélve a MacOS X-ről, ami éppúgy a BSD család tagja, mint a FreeBSD. De erről majd legközelebb. Most legyünk gyakorlatiasabbak, és installáljunk.

### Mikor vegyük ki Don Carlos vakbelét?

A cél tehát az, hogy avulóban lévő noteszgépemre fölmenjen a FreeBSD. Viszont, ha már itt tartunk, a FreeBSD sajátosságait megismerve esetleg a hardvereszközök szükségképpeni és rohamos elavulását is más fényben fogjuk látni. Mert tegyük fel, hogy lehozok a padlásról egy korábban már kidobott, de amúgy megbízható gyártótól származó gépet, Pentium II alaplappal, 64M memóriával, felteszem rá a FreeBSD-t, kinevezem átjárónak, levelezőszervernek, tűzfalnak, akárminek, elindítom, aztán lehet, hogy öt évig le se áll, fél évtized múlva éppoly kifogástalanul működik, mint ma délután. Akkor is elavul közben? Mi a szartól? ­ kérdeném, ha a Számítástechnika egy finom, irodalmi hetilap volna, de nem az, tehát másképp kérdezem. Mi a frászért kéne elavultnak tekintenünk egy olyan gépet, amelyen az egyik legkiforrottabb, legüzembiztosabb, legteherbíróbb operációs rendszer futtatható? Továbbá valószínű, hogy ennek ez operációs rendszernek a mához öt évre megjelenő 8.0-ás vagy akárhányas új verziója is képes lenne bármelyik ma használatos hardveren elfutni, úgyhogy nagy bajba kerülne az ipar, ha a végfelhasználók íróasztalait valami okból a BSD jellegű oprendszerek vonnák az uralmuk alá. Hál' istennek, erre esély sincs, noha én most épp a FreeBSD megszelídítésével, asztali operációs rendszerként való hasznosításával próbálkozom, hogy mekkora sikerrel, az majd elválik. Kettő darab cédélemez kell hozzá, ez a paraméter volt a döntésem alapja. Ha a FreeBSD installálásához hat darab cédé kellene, meglehet, sohase találkoznánk. Később viszont az fog kiderülni ­ most kicsit előreugrunk az időben ­, hogy ebből a két cédéből is csak az elsőre lesz szükség. Voltaképp máig nem tudom, hogy a második mire való, a jelek szerint semmi olyasmi nincs rajta, amire szükségem lehetne, illetve ha valamire mégis szükségem volna a telepítés után (mondjuk, akarnék egy Midnight Commandert, mert ahhoz azért ragaszkodom), azt másutt fogom föltalálni. Most mindenesetre beteszem a meghajtóba az első cédét, újraindítok, és lesz, ami lesz. Mellesleg a fenti mondatból sugárzó fatalizmusnak konkrét anyagi alapja van, amennyiben jelenleg egyszerre három számítógépen dolgozom, mint sztahanovista fonónő: az asztali gép és a noteszgép mellett, a Psion Rendszerház Kft.-nek, és e cég szentéletű vezetőjének, Dés Tamásnak köszönhetően, újra van a kezem ügyében egy Psion netBook is. Most tehát ez ­ mármint a netBook ­ az utazógép és a vésztartalék, az asztali Dell Optiplex GX260-nal, lekopogom, még nem volt semmi gond, így aztán a HP noteszgép felszabadult, azaz kísérleti terepként használható. Ha az ember visszaeső jelleggel merevlemezt particionál, operációs rendszereket telepít és távolít el, bootmanagerekkel bíbelődik, azt lehetőleg ne egy üzemszerűen használt gépen tegye. Illetve teheti ott is, de az olyan, mint a Don Carlos címszereplőjének a vakbelét előadás közben műteni: bármikor közbejöhet valami malőr, akkor az énekesnek annyi, a közönség pedig reklamál, és kéri vissza a jegyek árát. Jobb a békesség. Újraindítás után megjelenik az ilyen jellegű operációs rendszerek bootolásánál megszokott szöveges tohuvabohu, aztán jön egy menü, nem grafikus ugyan, de azért mégis. Ô a sysinstall, a FreeBSD telepítő és rendszerkonfiguráló prog- ramja, lásd az 1. képen, vagyis nemcsak telepítéskor van haszna, hanem mindig, ha a rendszeren valamit változtatni akarunk. A mindig valójában azt jelenti, hogy az esetek három százalékában, ugyanis a többi esetben elő kell kotorni valamilyen konfigurációs állományt, és abban kell átírni valamit. De ott még nem tartunk, ahhoz először fel kéne tennünk a rendszert, lássuk, hogyan. A menük között van olyan, hogy Keymap, ott lehet megválasztani a billentyűzetkiosztást, található közöttük magyar is. Százegy gombos is van, meg százkét gombos is, ez jó, megyünk tovább. Hamarosan kiderül, hogy a további menüpontok javarészt irrelevánsak, valójában két út áll előttem, a standard vagy a custom, viszont az utóbbi a "for experts" címkével van ellátva, én pedig expert egészen biztosan nem vagyok. Szimpla spíszbürger vagyok, nemkülönben sztahanovista fonónő, ergo a standard utat fogom járni, az való nekem.

### A particionálás örömei

Ami ezután jön, tehát a fészekrakás a merevlemezen, az a modern Linux-disztribúciók által elkényeztetett felhasználónak valószínűleg sok volna egy kicsit. Ô esetleg már a sysinstallt is kibírhatatlanul fapadosnak találná, az fdisk-et (2. kép) és a disklabelt pedig horrorisztikusnak, tőlük ennélfogva bizonyára sikítana. Pedig igazából nincs ezekkel semmi gond, horrorról pedig majd legközelebb lesz szó, egy másik operációs rendszerrel kapcsolatban. Én ugyanis tudom, mi az a horror. Az nem ilyen. Itt csak abba kell belenyugodni, hogy a FreeBSD lemezcímkézése az Ultrix, a Digital Unix, a SunOS és a Solaris mintáját követi, illetve azok követik a BSD-hagyományokat, úgyhogy itt más a szóhasználat. Amikor a PC-stílushoz szokott felhasználó partíciót mondana, akkor a FreeBSD FDISK esetleg slice-ról beszél, de hát hadd csinálja, ha jó neki (3. kép). Mindenesetre kihasítok a merevlemezből egy szeletet, majd azt komfortosan berendezem a UNIX-világ szokásai szerint, azaz lesz külön cserepartíció, külön a gyökér, aztán lesz tmp, var, usr, esetleg még home is. Ezzel kapcsolatban azt mondja a telepítő, hogy amennyiben bőséges helyünk van (200M vagy több), akkor bízzuk az egészet az Auto parancsra, aztán ez a világ lesz az összes létező világok legjobbika. Mint látjuk, a telepítő iparkodik a maga módján. Más kérdés, hogy nem mond igazat. Az automatikus particionálásból két giga alatt nem sok jó sül ki, legalábbis ennél a verziónál, ami konkrétan az 5.0, és ami még nagyon fiatal. Annyira, hogy a FreeBSD weboldalán óvják tőle a nagyobb felhasználókat, és az előző változatot proponálják inkább. Viszont én nem vagyok nagy felhasználó, hanem egészen kicsike felhasználó vagyok, tehát bizalommal tekintek a jövőbe és megyek tovább. Megnyomom az "a" billentyűt és a telepítő kiosztja a helyet a leendő partíciók között. A gyökér, a /var és a /tmp egyaránt 256-256 megabájtot kap, a swap 363-at, a maradék 916 lesz a /usr. Viszont ez így hülyeség. A FreeBSD kézikönyve szerint a gyökér alá általában negyven megabájt kerül, többet legfeljebb az eljövendő FreeBSD-verziók megjósolhatatlan igényeire való tekintettel érdemes szánni neki. A kézikönyv száz megabájtot proponál, később viszont látni fogom, hogy a telepítő százhúsz megát tesz kötelezővé. Mindamellett az se egynegyed gigabájt. A /var céljáira a FreeBSD Handbook ötven megabájtot javasol, nem pedig 256-ot, más kérdés, hogy ötven mega mellett már telepítés közben is lennének problémák. Tehát végül százhúszat kap a gyökér, ahogy a /var is meg a /tmp is, a swap 400 lesz, a többi pedig /usr. Átszerkesztem tehát az egészet, az eljárás gyors, egyszerű, világos. Vissza fogom én ezt még sírni, noha ezt egyelőre nem sejtem egyáltalán.

### A felhasználó önmagára talál

Most pedig a telepítendő holmi, a FreeBSD szóhasználata szerint a distribution set kiválasztása következik, ennek érdekében leginkább azt kell tisztán látnom, hogy ki vagyok én, és miért születtem erre a világra. A FreeBSD ugyanis felkínál bizonyos egységcsomagokat, annak megfelelően, hogy ki az, aki a rendszert használni fogja, én például lehetnék "Developer", "X-Developer", "Kern-Developer", sőt "X-Kern-Developer", továbbá nyilván műlovarnő is, bár ezt az opciót a telepítő nem ajánlja föl. Végül az "X-user" megjelölést választom, mindamellett ez nem igazán befolyásolja, hogy milyen alkalmazások kerülnek a gépre, sőt ez valójában nem is érdekes. Most mindenesetre telepítem a ports collection nevű képződményt, ami jól fog jönni a későbbiekben, ez ugyanis azért van, hogy a kívánt alkalmazások letöltésének, lefordításának és telepítésének műveletét automatizálja. FreeBSD alá mintegy hét-nyolcezer telepítésre kész alkalmazás létezik, például "NETwork DUmp data Displayer and Editor for tcpdump tracefiles", továbbá "LPmud mudlib, for use with DGD" meg ehhez hasonlók. Némi időbe telik, míg az ember átbogarássza a listát de nem baj, mert okosodik általa. Lát például egy DNSSEC Walker nevű alkalmazást, persze nem tudja, mi az, ámde most utánanézhet: a telepítő részletes és világos magyarázattal szolgál. Íme: "This is a proof-of-concept of a utility to download DNS zone contents even when AXFR is disabled on the server, assuming DNSSEC is used." Most már ezt is tudom. Végezetül megválasztom a telepítés forrását, vagyis az installáló médiát, egy lehetőségből tudok választani, úgymint cédérom. A további opciók ilyenek volnának, hogy telepítés ftp kiszolgálóról, de hát esélyem se volt eddig valamiféle ppp-kapcsolatot létesíteni, telepítés DOS-partícióról, amit semmi szín alatt nem csatolhattam be a FreeBSD állományrendszere alá, egyebek között azért sem, mert a FreeBSD állományrendszere ez idő szerint nem is létezik, egy óhaj csupán. Van még néhány ehhez hasonló ötlete a telepítőnek, de én ezeket nem veszem komolyan. Valójában ugyanis nem először telepítem én ezt a nagyszerű rendszert, hanem harmadjára vagy negyedjére, ám a teljes történet fölvázolásához egy Jókai mesélőkedvére volna szükség, és főleg a Jókai-életművel összemérhető terjedelemre, az pedig most nincs. Annyira nincs, hogy a folytatás egy hónap múlva következik.

Váncsa István